# 🎨 多卫星协同AI推理系统 - 可视化对接文档

## 📋 项目概述

### 🎯 项目背景
本项目是一个基于联邦学习的多卫星协同AI推理系统，实现了卫星间的智能任务分配、负载均衡、故障容错和分布式模型训练。系统支持量化模型推理，大幅提升了星端AI推理效率，适用于灾害监测、环境监控等应用场景。

### 🌟 核心特性
- **多卫星协同推理**: 3个模拟卫星节点协同工作
- **联邦学习集成**: 分布式模型训练和参数聚合
- **量化模型支持**: 动态量化提升推理效率
- **智能负载均衡**: 多种策略的任务分配
- **故障容错机制**: 自动故障检测和恢复
- **覆盖优化管理**: 基于位置的卫星选择
- **紧急响应系统**: 高优先级任务处理

## 📊 可视化数据源

### 1. 系统性能数据

#### 📈 量化性能数据
**文件位置**: `models/quantization_performance.csv`
**数据内容**:
- `model_path`: 模型文件路径
- `avg_latency_ms`: 平均推理时延(毫秒)
- `min_latency_ms`: 最小时延
- `max_latency_ms`: 最大时延
- `std_latency_ms`: 时延标准差
- `fps`: 每秒处理帧数
- `memory_usage_mb`: 内存使用量(MB)
- `test_time`: 测试时间

**可视化建议**:
- 📊 **性能对比图**: 原始模型 vs 量化模型的时延、FPS、内存使用对比
- 📈 **时间序列图**: 不同测试时间的性能变化趋势
- 🎯 **雷达图**: 多维度性能指标综合展示

#### 📊 推理性能报告
**文件位置**: `inference/perf_report.csv`
**数据内容**:
- 图片名、模型类型、平均时延、最小时延、最大时延

**可视化建议**:
- 📊 **箱线图**: 不同模型类型的时延分布
- 📈 **散点图**: 图片复杂度 vs 推理时延关系

### 2. 训练过程数据

#### 🎨 训练可视化图片
**文件夹**: `training_vis/`
**内容**: 训练过程中的分割效果图，按epoch和batch命名
- 格式: `epoch{epoch}_batch{batch}.png`
- 数量: 约60张图片
- 展示: 原图、预测掩码、真实掩码对比

**可视化建议**:
- 🎬 **训练过程动画**: 按时间顺序展示训练效果改善
- 📊 **效果对比网格**: 不同epoch的效果对比
- 🎯 **关键帧提取**: 选择代表性图片展示训练进展

#### 📈 训练日志数据
**文件**: `training.log`
**内容**: 训练过程中的日志信息

**可视化建议**:
- 📊 **训练曲线**: 损失函数、准确率变化
- ⚠️ **错误分析**: 训练过程中的异常情况

### 3. 卫星系统数据

#### 🛰️ 卫星配置数据
**文件**: `satellite_system/satellite_config.json`
**内容**: 卫星节点配置信息
- 3个卫星节点(sat_001, sat_002, sat_003)
- 计算能力、内存容量、覆盖区域
- 轨道周期、支持功能

**可视化建议**:
- 🌍 **卫星轨道图**: 3D轨道可视化
- 📊 **能力对比图**: 各卫星计算能力、内存对比
- 🗺️ **覆盖区域图**: 卫星覆盖范围可视化

#### 🔄 联邦学习数据
**配置项**: 联邦学习参数
- 同步间隔、批次大小、学习率
- 聚合方法、参与者数量

**可视化建议**:
- 📈 **联邦学习过程**: 参数聚合、模型更新过程
- 📊 **参与度统计**: 各卫星参与训练情况

### 4. 测试结果数据

#### ✅ 测试覆盖率
**测试文件**: `test_multi_satellite_simple.py`
**结果**: 
- 快速测试: 100% (3/3 通过)
- 完整测试: 96.43% (27/28 通过)

**可视化建议**:
- 📊 **测试结果仪表板**: 通过率、失败用例分析
- 🎯 **功能覆盖热力图**: 各功能模块测试覆盖情况

## 🎨 可视化建议与实现

### 1. 系统架构可视化

#### 🏗️ 系统架构图
**建议工具**: Draw.io, Visio, 或代码生成
**内容**:
- 3个卫星节点及其连接关系
- 地面训练系统
- 联邦学习中心
- 数据流向和通信协议

#### 🔄 数据流程图
**内容**:
- 数据从地面到卫星的传输
- 卫星间的协同推理流程
- 联邦学习的参数聚合过程

### 2. 性能监控仪表板

#### 📊 实时性能监控
**建议工具**: Streamlit, Dash, 或Web框架
**功能**:
- 实时显示各卫星状态
- 推理性能指标
- 系统资源使用情况
- 故障告警

#### 📈 历史性能分析
**内容**:
- 量化前后性能对比
- 不同模型类型的性能曲线
- 系统负载变化趋势

### 3. 训练过程可视化

#### 🎬 训练动画
**实现方式**:
```python
import matplotlib.pyplot as plt
import matplotlib.animation as animation
from PIL import Image
import os

def create_training_animation():
    # 读取training_vis文件夹中的图片
    # 按时间顺序排列
    # 创建动画展示训练进展
    pass
```

#### 📊 训练指标图表
**内容**:
- 损失函数变化曲线
- 准确率/IOU变化
- 学习率调整
- 梯度变化

### 4. 卫星系统可视化

#### 🌍 3D卫星轨道图
**建议工具**: Plotly, Three.js
**功能**:
- 3D地球模型
- 卫星轨道轨迹
- 实时位置更新
- 覆盖区域显示

#### 📊 卫星状态面板
**内容**:
- 各卫星计算能力使用率
- 内存使用情况
- 通信状态
- 任务队列状态

### 5. 推理结果可视化

#### 🖼️ 图像分割结果展示
**实现方式**:
```python
def visualize_inference_results(original_image, predicted_mask, ground_truth=None):
    fig, axes = plt.subplots(1, 3, figsize=(15, 5))
    
    # 原图
    axes[0].imshow(original_image)
    axes[0].set_title('Original Image')
    
    # 预测结果
    axes[1].imshow(predicted_mask, cmap='jet')
    axes[1].set_title('Predicted Mask')
    
    # 对比图
    if ground_truth is not None:
        axes[2].imshow(ground_truth, cmap='jet')
        axes[2].set_title('Ground Truth')
    
    plt.tight_layout()
    return fig
```

#### 📊 性能分析图表
**内容**:
- 推理时延分布
- 准确率统计
- 错误案例分析

## 🛠️ 技术实现建议

### 1. 前端技术栈
**推荐方案**:
- **Web框架**: Streamlit (快速原型) 或 Dash (复杂交互)
- **图表库**: Plotly, Matplotlib, Seaborn
- **3D可视化**: Plotly 3D, Three.js
- **动画**: Matplotlib Animation, Plotly Animation

### 2. 数据处理
**Python库**:
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px
import plotly.graph_objects as go
from PIL import Image
import json
```

### 3. 数据读取示例
```python
# 读取量化性能数据
def load_quantization_data():
    df = pd.read_csv('models/quantization_performance.csv')
    return df

# 读取卫星配置
def load_satellite_config():
    with open('satellite_system/satellite_config.json', 'r') as f:
        config = json.load(f)
    return config

# 读取训练图片
def load_training_images():
    import os
    image_files = sorted(os.listdir('training_vis/'))
    return image_files
```

## 📋 可视化任务清单

### 🎯 优先级1 (核心功能)
- [ ] 系统架构图
- [ ] 性能对比仪表板
- [ ] 训练过程动画
- [ ] 卫星状态监控

### 🎯 优先级2 (增强功能)
- [ ] 3D卫星轨道可视化
- [ ] 联邦学习过程动画
- [ ] 推理结果展示界面
- [ ] 故障分析图表

### 🎯 优先级3 (高级功能)
- [ ] 实时数据流可视化
- [ ] 交互式参数调整
- [ ] 预测分析图表
- [ ] 系统优化建议

## 📞 对接联系方式

### 🔗 项目文件结构
```
挑战杯小组作业/
├── satellite_system/          # 核心系统模块
├── models/                   # 模型文件
├── data/                     # 数据集
├── inference/                # 推理相关
├── training_vis/             # 训练可视化图片 ⭐
├── models/quantization_performance.csv  # 量化性能数据 ⭐
├── inference/perf_report.csv # 推理性能报告 ⭐
└── satellite_system/satellite_config.json  # 卫星配置 ⭐
```

### 📊 关键数据文件
1. **`models/quantization_performance.csv`** - 量化性能数据
2. **`inference/perf_report.csv`** - 推理性能报告
3. **`training_vis/`** - 训练过程图片
4. **`satellite_system/satellite_config.json`** - 卫星配置
5. **`training.log`** - 训练日志

### 🤝 协作建议
1. **数据格式**: 所有数据文件都是标准CSV/JSON格式，易于处理
2. **图片资源**: 训练可视化图片已按时间顺序命名
3. **配置信息**: 卫星配置采用JSON格式，结构清晰
4. **性能指标**: 包含详细的量化前后对比数据

### 📞 技术支持
- **数据格式**: CSV, JSON, PNG
- **编程语言**: Python (推荐)
- **可视化库**: Plotly, Matplotlib, Seaborn
- **交互框架**: Streamlit, Dash

---

**⭐ 建议优先实现系统架构图和性能监控仪表板，这两个是项目的核心展示内容！** 