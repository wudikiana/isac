# 交互式多卫星系统使用说明

## 系统概述

这是一个功能完整的交互式多卫星系统，集成了灾害应急响应、星间联邦学习、认知无线电、自主轨道控制等先进功能。

### 核心功能

- 🚨 **灾害应急响应**: PPO强化学习资源分配
- 🛰️ **卫星管理**: 实时状态监控和轨道控制
- 🤖 **星间联邦学习**: 分布式模型训练和参数同步
- 📡 **认知无线电**: 动态频谱接入和干扰避免
- 🎯 **自主轨道控制**: 编队维持和碰撞避免
- 📊 **系统监控**: 实时状态监控和性能分析
- 🧠 **推理任务**: 分布式AI推理处理

## 快速开始

### 1. 安装依赖

```bash
pip install torch numpy pillow argparse
```

### 2. 启动系统

```bash
# 启动交互式系统
python interactive_satellite_system.py

# 运行演示模式
python interactive_satellite_system.py --demo

# 指定配置文件
python interactive_satellite_system.py --config my_config.json

# 禁用自动刷新
python interactive_satellite_system.py --no-auto-refresh
```

### 3. 命令行参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `--demo` | 运行演示模式 | False |
| `--config` | 配置文件路径 | advanced_satellite_config.json |
| `--no-auto-refresh` | 禁用自动刷新 | False |
| `--refresh-interval` | 刷新间隔（秒） | 5 |
| `--log-level` | 日志级别 | INFO |

## 交互界面

### 主菜单模式

系统启动后进入主菜单模式，支持以下命令：

```
🌍 MAIN> help          # 显示帮助信息
🌍 MAIN> status        # 显示系统状态
🌍 MAIN> emergency     # 进入应急响应模式
🌍 MAIN> satellite     # 进入卫星管理模式
🌍 MAIN> monitoring    # 进入系统监控模式
🌍 MAIN> inference     # 进入推理任务模式
🌍 MAIN> config        # 显示系统配置
🌍 MAIN> history       # 显示命令历史
🌍 MAIN> clear         # 清屏
🌍 MAIN> exit          # 退出系统
```

### 应急响应模式

```
🚨 EMERGENCY> help                    # 显示应急命令帮助
🚨 EMERGENCY> trigger 3 39.9 116.4 地震灾害  # 触发紧急情况
🚨 EMERGENCY> list                    # 列出所有紧急情况
🚨 EMERGENCY> status                  # 显示应急系统状态
🚨 EMERGENCY> back                    # 返回主菜单
```

**紧急级别说明**:
- `1` - LOW: 低级别紧急情况
- `2` - MEDIUM: 中级别紧急情况  
- `3` - HIGH: 高级别紧急情况
- `4` - CRITICAL: 严重紧急情况

### 卫星管理模式

```
🛰️ SATELLITE> help           # 显示卫星管理帮助
🛰️ SATELLITE> list           # 列出所有卫星
🛰️ SATELLITE> status sat_001 # 显示卫星状态
🛰️ SATELLITE> control sat_001 restart  # 控制卫星
🛰️ SATELLITE> orbit sat_001  # 显示轨道信息
🛰️ SATELLITE> back           # 返回主菜单
```

**卫星控制命令**:
- `restart`: 重启卫星
- `maintenance`: 进入维护模式
- `online`: 恢复在线状态

### 系统监控模式

```
📊 MONITORING> help              # 显示监控命令帮助
📊 MONITORING> refresh           # 手动刷新状态
📊 MONITORING> auto              # 切换自动刷新
📊 MONITORING> interval 10       # 设置刷新间隔
📊 MONITORING> back              # 返回主菜单
```

### 推理任务模式

```
🤖 INFERENCE> help                    # 显示推理命令帮助
🤖 INFERENCE> submit image.jpg        # 提交推理任务
🤖 INFERENCE> submit image.jpg sim.npy # 提交带仿真特征的任务
🤖 INFERENCE> result task_1234567890  # 获取推理结果
🤖 INFERENCE> queue                   # 显示任务队列
🤖 INFERENCE> back                    # 返回主菜单
```

## 系统架构

### 核心组件

1. **AdvancedMultiSatelliteSystem**: 高级多卫星系统
   - PPO控制器
   - 联邦学习管理器
   - 认知无线电管理器
   - 自主轨道控制器

2. **MultiSatelliteInferenceSystem**: 推理系统
   - 负载均衡器
   - 故障容错管理器
   - 分布式训练管理器
   - 覆盖范围管理器

3. **InteractiveSatelliteSystem**: 交互界面
   - 命令解析器
   - 状态显示器
   - 配置管理器

### 数据流

```
用户输入 → 命令解析 → 系统调用 → 结果处理 → 状态显示
    ↓
配置文件 → 系统初始化 → 组件加载 → 服务启动
    ↓
监控线程 → 状态更新 → 自动刷新 → 实时显示
```

## 配置文件

### 卫星配置

```json
{
  "satellites": {
    "sat_001": {
      "ip": "192.168.1.101",
      "port": 8080,
      "compute_capacity": 1e12,
      "memory_capacity": 8192,
      "coverage_area": {"lat": [35, 45], "lon": [110, 130]},
      "orbit_period": 90.0,
      "supported_features": ["sar_imaging", "computing", "communication"]
    }
  }
}
```

### 应急响应配置

```json
{
  "emergency_response": {
    "response_timeout": 300,
    "max_concurrent_emergencies": 5,
    "ppo_learning_rate": 0.0003,
    "ppo_clip_ratio": 0.2
  }
}
```

### 联邦学习配置

```json
{
  "federated_learning": {
    "sync_interval": 600,
    "min_participants": 2,
    "aggregation_method": "fedavg",
    "learning_rate": 0.001,
    "batch_size": 32,
    "epochs_per_round": 5
  }
}
```

## 使用示例

### 示例1: 灾害应急响应

```bash
# 启动系统
python interactive_satellite_system.py

# 进入应急模式
emergency

# 触发地震灾害
trigger 3 39.9 116.4 北京地震灾害

# 查看应急状态
status

# 返回主菜单
back
```

### 示例2: 卫星管理

```bash
# 进入卫星管理模式
satellite

# 查看所有卫星
list

# 查看特定卫星状态
status sat_001

# 重启卫星
control sat_001 restart

# 查看轨道信息
orbit sat_001
```

### 示例3: 推理任务

```bash
# 进入推理模式
inference

# 提交推理任务
submit data/test_image.jpg

# 查看任务队列
queue

# 获取结果
result task_1234567890
```

### 示例4: 系统监控

```bash
# 进入监控模式
monitoring

# 设置刷新间隔
interval 10

# 切换自动刷新
auto

# 手动刷新
refresh
```

## 故障排除

### 常见问题

1. **系统初始化失败**
   - 检查配置文件是否存在
   - 确认依赖包已安装
   - 查看日志输出

2. **卫星连接失败**
   - 检查网络连接
   - 确认卫星IP地址正确
   - 验证端口是否开放

3. **推理任务失败**
   - 检查图像文件格式
   - 确认模型文件存在
   - 查看错误日志

4. **性能问题**
   - 调整刷新间隔
   - 禁用自动刷新
   - 检查系统资源

### 日志查看

系统会生成详细的日志信息，包括：
- 系统初始化日志
- 命令执行日志
- 错误和警告信息
- 性能监控数据

### 配置备份

系统会自动保存用户配置到 `interactive_system_config.json`，包括：
- 自动刷新设置
- 刷新间隔
- 命令历史
- 会话信息

## 高级功能

### PPO强化学习

系统使用PPO算法进行资源分配优化：
- 状态空间：卫星状态、紧急情况、资源需求
- 动作空间：卫星分配、资源分配策略
- 奖励函数：响应时间、资源利用率、成功率

### 联邦学习

支持星间分布式训练：
- 本地模型训练
- 参数聚合
- 模型同步
- 增量学习

### 认知无线电

动态频谱管理：
- 频谱感知
- 干扰避免
- 自适应调制
- 功率控制

### 自主轨道控制

智能轨道管理：
- 编队维持
- 碰撞避免
- 燃料优化
- 机动规划

## 扩展开发

### 添加新命令

1. 在相应的处理函数中添加新命令
2. 更新帮助信息
3. 添加参数验证
4. 实现命令逻辑

### 自定义配置

1. 修改配置文件
2. 添加新的配置项
3. 更新配置加载逻辑
4. 测试配置有效性

### 集成新功能

1. 创建新的系统组件
2. 在主系统中集成
3. 添加交互界面
4. 更新文档

## 技术支持

如有问题，请查看：
1. 系统日志文件
2. 配置文件设置
3. 依赖包版本
4. 网络连接状态

---

**版本**: v2.0  
**更新时间**: 2024年1月  
**作者**: 多卫星系统开发团队 